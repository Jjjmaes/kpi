

# **目录（TOC）**

1. 产品背景
2. 项目目标
3. 使用角色与权限
4. 整体业务流程
5. 核心功能需求
6. 详细页面与交互设计
7. KPI 计算规则（AI 时代版本）
8. 系数可配置机制
9. 项目创建的比例“锁定机制”
10. 数据结构设计（MongoDB）
11. API 设计（REST）
12. Cron 任务设计
13. 权限模型（RBAC）
14. 非功能性要求（NFR）
15. 测试需求与验收标准
16. 一人多岗实现机制
17. 日后扩展能力（如 AI 翻译平台集成）

---

---

# **1. 产品背景**

随着 AI 预翻译、LLM、MTPE 逐渐主流，传统翻译公司的岗位价值链发生变化：

* MTPE → 主力翻译方式
* 审校 → 价值上升，被动纠错变为主动质控
* PM → 工作量减少，仅需流程管理
* 销售 → 转向销售驱动模式（回款重要性增大）
* 综合岗 → 工作随业务量增长而增加

因此，公司采用 **底薪 + 绩效（完全量化）** 的方式。

为了保证公平、透明、可复制、可审计，需要构建一套 **可配置的自动 KPI 系统**。

---

# **2. 项目目标**

| 类别      | 描述             |
| ------- | -------------- |
| 🎯 自动化  | 所有 KPI 由系统自动生成 |
| 🎯 可配置  | 所有比例可后台配置，不写死  |
| 🎯 公正性  | 历史项目不可因配置变更而改变 |
| 🎯 一人多岗 | 同一员工可同时承担多个角色  |
| 🎯 系统化  | 每月自动计算工资绩效     |
| 🎯 集成性  | 未来与 AI 翻译平台打通  |

---

# **3. 系统角色与权限**

| 角色            | 权限                       |
| ------------- | ------------------------ |
| Admin 管理员     | 全局配置（系数配置/用户管理/查看全部 KPI） |
| Finance 财务    | 查看全公司 KPI，导出工资表          |
| Sales 销售      | 创建项目、查看自己 KPI            |
| PM 项目经理       | 标记返修、延期、客诉、产能记录          |
| Translator 翻译 | 查看属于自己的 KPI              |
| Reviewer 审校   | 查看属于自己的 KPI              |

---

# **4. 整体业务流程**

```
销售创建项目 → 系统自动锁定 KPI 系数 → 添加参与角色 →
翻译/审校/PM 执行项目 → 标记返修/延期/客诉 →
项目完成 → Cron 定时运行 KPI 结算 →
财务审核 → 导出工资表
```

关键：
✔ 项目创建时锁定比例
✔ KPI 计算只使用锁定比例
✔ 后台可调整比例但不影响历史数据

---

# **5. 核心功能需求**

## **5.1 后台（Admin）核心功能**

* 设置 KPI 系数（翻译/审校/PM/销售/综合岗）
* 设置完成系数
* 查看更改日志（必须）
* 用户角色管理
* KPI 汇总报表
* KPI 月度工资单导出（Excel）

---

## **5.2 项目管理功能**

* 新建项目（由销售创建）
* 自动从配置表读取当前 KPI 系数，并写入项目的 `locked_ratios`
* 添加参与成员（翻译/PM/审校/综合岗/销售）
* 字数占比查看（多翻译时）
* 标记返修次数
* 标记延期（≥ deadline）
* 标记客户投诉
* 上传项目证明文件（可选）
* 项目完成标记

---

## **5.3 KPI 结算功能**

* 单项目 KPI 自动计算
* 多项目 KPI 汇总
* 月度 KPI 自动生成（Cron）
* 系数变更记录不会影响历史项目

---

# **6. 页面与交互设计（概要版）**

（如果你需要，我可继续输出完整 Figma 风格的交互稿）

## 6.1 KPI 系数管理页

字段：

* 翻译（MTPE）系数
* 翻译（深度编辑）系数
* 审校系数
* PM 系数
* 销售金额奖励系数
* 销售回款系数
* 综合岗系数
* 完成系数（返修/延期/客诉）

支持版本管理（查看更改历史）。

---

## 6.2 新建项目页

字段：

* 客户名称
* 项目名称
* 项目金额
* 交付时间
* 自动生成字段：`locked_ratios`（从配置表复制）

---

## 6.3 添加成员页

字段：

* 用户（下拉框）
* 角色（翻译/审校/PM/销售/综合）
* 字数占比（翻译专用）

---

## 6.4 KPI 汇总报表

字段：

* 姓名
* 岗位
* KPI 数值
* 参与项目列表

导出 Excel。

---

# **7. KPI 计算规则（AI 时代）**

完全量化，无主观评价：

---

## 7.1 翻译（MTPE）

```
翻译绩效 = 项目金额 × 翻译系数 × 字数占比 × 完成系数
```

---

## 7.2 翻译（深度编辑）

```
深度编辑绩效 = 项目金额 × 深度编辑系数 × 字数占比 × 完成系数
```

---

## 7.3 审校

```
审校绩效 = 项目金额 × 审校系数 × 完成系数
```

---

## 7.4 PM

```
PM绩效 = 项目金额 × PM系数 × 完成系数
```

---

## 7.5 销售（金额奖励）

```
销售奖励 = 成交金额 × 销售金额奖励系数
```

---

## 7.6 销售（回款奖励）

```
销售回款绩效 = 回款金额 × 回款系数 × 完成系数
```

---

## 7.7 综合岗（按公司总额）

```
综合岗绩效 = 全公司项目金额合计 × 综合岗系数 × 完成系数
```

---

# **8. 系数可配置机制（系统重点）**

所有系数在系统里可配置：

| 系统字段                      | 说明             |
| ------------------------- | -------------- |
| translator_ratio_mtpe     | 翻译（AI MTPE）    |
| translator_ratio_deepedit | 翻译（人工深度编辑）     |
| reviewer_ratio            | 审校             |
| pm_ratio                  | 项目经理           |
| sales_bonus_ratio         | 销售金额奖励         |
| sales_commission_ratio    | 销售回款奖励         |
| admin_ratio               | 综合岗分成          |
| completion_factor         | 完成系数（返修/延误/客诉） |

---

# **9. 比例锁定机制（核心技术需求）**

### 9.1 触发时机

项目创建瞬间，从 `kpi_config` 表复制全部系数，写入：

```
projects.locked_ratios
```

### 9.2 存储结构

```
locked_ratios: {
    translator_mtpe: 0.12,
    translator_deepedit: 0.18,
    reviewer: 0.08,
    pm: 0.03,
    sales_bonus: 0.02,
    sales_commission: 0.10,
    admin: 0.005
}
```

### 9.3 不可修改

后续无论后台系数如何调整，历史项目必须使用当时锁定的比例。

---

# **10. 数据结构设计（MongoDB）**

已为你生成过，这里略。

（可补充 ER 图）

---

# **11. API 设计（REST）**

## 11.1 KPI 配置 API

* GET /kpi/config
* POST /kpi/config/update

## 11.2 项目 API

* POST /project/create
* POST /project/add-member
* POST /project/set-revision
* POST /project/set-delay
* POST /project/set-complaint
* POST /project/finish

## 11.3 KPI 计算 API

* POST /kpi/generate-monthly
* GET /kpi/user/:id
* GET /kpi/month/:month

---

# **12. Cron 自动任务**

时间：每月 1 日 00:00

流程：

1. 查找上月所有完成项目
2. 读取 locked_ratios
3. 计算各岗位 KPI
4. 写入 kpi_records
5. 生成工资表
6. 可发送自动通知

---

# **13. 权限模型（RBAC）**

略（与前述一致）。

---

# **14. 非功能需求（NFR）**

| 类型  | 要求                 |
| --- | ------------------ |
| 安全  | 历史 KPI 数据不可篡改      |
| 日志  | 系数修改必须记录           |
| 性能  | 月度生成耗时 ≤ 1 分钟      |
| 可用性 | KPI 页面需支持 Excel 导出 |
| 兼容性 | 支持未来与翻译平台对接        |

---

# **15. 测试验收标准**

### 必测内容：

* 系数更改 → 历史项目不变
* 一人多岗 KPI 合并正确
* 翻译字数占比影响翻译 KPI
* 延期、返修影响完成系数
* Cron 自动生成 KPI 正常运行
* 报表导出正确
* 权限控制正确

---

# **16. 一人多岗设计说明**

允许：

* 同一员工在同项目多个角色（PM+翻译）
* 同一员工在本月多个项目不同角色
* KPI 合并时自动按角色区分后累加

数据库结构支持：

```
project_members:
{ userId, projectId, role, ratio_locked, word_ratio }
```

---

# **17. 扩展能力（预留）**

未来可扩展：

* AI 翻译平台数据自动获取（字数、使用模型、质量评分）
* 自动判断 MTPE / Deep Edit
* AI 质量评分影响完成系数
* 自动生成发票 & 对账单

---

---

# 🎉 已为你完成《KPI 系统开发需求文档 + 设计说明书完整版本》

---
