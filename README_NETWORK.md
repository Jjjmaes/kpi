# 网络访问配置说明

## 概述

系统已配置为支持通过局域网IP和域名访问，而不仅仅是本机访问。

## 访问方式

### 1. 本机访问
```
http://localhost:3000
```

### 2. 局域网访问
启动服务器后，控制台会显示本机IP地址，例如：
```
http://192.168.1.100:3000
```

### 3. 域名访问
如果配置了域名，可以通过域名访问：
```
http://your-domain.com:3000
```

## 配置说明

### 环境变量

可以在 `.env` 文件中配置以下环境变量：

```env
# 服务器端口（默认3000）
PORT=3000

# 服务器监听地址（默认0.0.0.0，允许所有网络接口）
HOST=0.0.0.0

# 域名（可选，用于显示在启动信息中）
DOMAIN=your-domain.com
```

### 自定义API地址

如果前端和后端不在同一服务器，可以通过URL参数指定API地址：

```
http://your-frontend.com?api=http://your-backend.com:3000
```

## 防火墙配置

如果无法通过局域网访问，请检查：

1. **Windows防火墙**：
   - 打开"Windows Defender 防火墙"
   - 点击"高级设置"
   - 添加入站规则，允许端口3000（TCP）

2. **路由器配置**：
   - 确保设备在同一局域网
   - 检查路由器是否阻止了内网通信

3. **杀毒软件**：
   - 某些杀毒软件可能会阻止网络访问
   - 将Node.js添加到白名单

## 启动服务器

```bash
npm start
```

启动后，控制台会显示：
```
🚀 Server running on http://0.0.0.0:3000
📡 Accessible from:
   - Local: http://localhost:3000
   - Network: http://192.168.1.100:3000
```

## 测试访问

1. 在本机浏览器访问：`http://localhost:3000`
2. 在同一局域网的其他设备访问：`http://[服务器IP]:3000`
3. 如果配置了域名，通过域名访问

## 注意事项

1. **安全性**：生产环境建议配置HTTPS和限制CORS来源
2. **端口占用**：确保3000端口未被其他程序占用
3. **MongoDB连接**：确保MongoDB也允许远程连接（如果MongoDB不在本机）

## 故障排查

### 无法通过IP访问
- 检查服务器是否监听在 `0.0.0.0` 而不是 `127.0.0.1`
- 检查防火墙设置
- 检查路由器配置

### 跨域问题
- 系统已配置CORS允许所有来源
- 如果仍有问题，检查浏览器控制台错误信息

### API请求失败
- 检查API_BASE是否正确
- 查看浏览器控制台的网络请求
- 确认服务器正在运行

